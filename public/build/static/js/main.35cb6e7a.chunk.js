(this["webpackJsonpmoovi-front"]=this["webpackJsonpmoovi-front"]||[]).push([[0],{371:function(e,t,a){e.exports=a(677)},376:function(e,t,a){},518:function(e,t,a){},519:function(e,t,a){},590:function(e,t,a){},614:function(e,t,a){},615:function(e,t,a){},677:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),o=a.n(s),c=(a(376),a(377),a(378),a(30)),i=a(31),l=a(33),u=a(32),m=a(34),p=a(88),d=a(686),h=a(695),g=a(11),v=a.n(g),f=a(76),b=a(322),E=function(e){var t;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.response,console.log(t.data),401!==t.status||"Token expirado"!==t.data.message){a.next=5;break}return localStorage.removeItem("loggedUser"),window.location="/users/login",a.abrupt("return",e);case 5:return a.abrupt("return");case 6:case"end":return a.stop()}}))},y=a.n(b).a.create({});y.interceptors.request.use((function(e){var t,a;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return(t=localStorage.getItem("loggedUser"))&&(console.log("djasldjslkjsakldjsldkaj"),a=JSON.parse(t),e.headers.Authorization="Bearer ".concat(a.token)),n.abrupt("return",e);case 3:case"end":return n.stop()}}))})),y.interceptors.response.use((function(e){return e}),(function(e){var t;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.a.awrap(E(e));case 2:return t=a.sent,console.log(t),a.abrupt("return",Promise.reject(t));case 5:case"end":return a.stop()}}))}));var w=y,O=a(692),j=a(693),k=a(23),S=a(247),x=a(35),C=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(f.a)({},n,r))},a.handleSubmit=function(e){var t,n,r,s,o;return v.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e.preventDefault(),a.props.form.validateFields((function(e,t){e||console.log("Received values of form: ",t)})),c.next=4,v.a.awrap(w({url:"".concat("https://mooviapp.herokuapp.com","/users/login"),method:"POST",data:{username:a.state.username,password:a.state.password}}));case 4:200===(t=c.sent).status&&(n=JSON.stringify(t.data),r=a.props,s=r.authenticateUser,o=r.history,localStorage.setItem("loggedUser",n),s(),o.push("/"));case 6:case"end":return c.stop()}}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("article",{class:"mw6 center bg-white shadow-5 br3 pa3 pa4-ns mv7 ba b--black-10"},r.a.createElement(O.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement(O.a.Item,null,e("username",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(j.a,{prefix:r.a.createElement(k.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username",name:"username",onChange:this.handleChange}))),r.a.createElement(O.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(j.a,{prefix:r.a.createElement(k.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password",name:"password",onChange:this.handleChange}))),r.a.createElement(O.a.Item,null,r.a.createElement(S.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in")," ","Ou ",r.a.createElement(x.b,{to:"/users/signup"},"Se Cadastre!"))))}}]),t}(n.Component),I=O.a.create({name:"normal_login"})(C),M=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).logoutUser=function(){localStorage.removeItem("loggedUser"),a.setState({isUserAuthenticated:!1})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=d.a.Header,t=localStorage.length>=2;return console.log("aqui",localStorage),r.a.createElement("div",null,t?r.a.createElement(e,{style:{position:"fixed",background:"#feb400",zIndex:1,width:"100%"}},r.a.createElement("div",{className:"logo"}),r.a.createElement("img",{src:"../images/Logo-moovi.png",width:"120",alt:"logo"}),r.a.createElement(h.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["0"],style:{background:"#000000",lineHeight:"64px",float:"right"}},r.a.createElement(h.a.Item,{key:"0"},r.a.createElement(x.b,{to:"/"},"Home")),r.a.createElement(h.a.Item,{key:"1"},r.a.createElement(x.b,{to:"/movies/now-playing"},"Movies")),r.a.createElement(h.a.Item,{key:"2"},r.a.createElement(x.b,{to:"/all-movie-theaters"},"Cinemas")),r.a.createElement(h.a.Item,{key:"3"},r.a.createElement(x.b,{onClick:this.logoutUser,to:"/"},"Logout")))):r.a.createElement(e,{style:{position:"fixed",background:"#feb400",zIndex:1,width:"100%"}},r.a.createElement("div",{className:"logo"}),r.a.createElement("img",{src:"../images/Logo-moovi.png",width:"120",alt:"logo"}),r.a.createElement(h.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["0"],style:{background:"#000000",lineHeight:"64px",float:"right"}},r.a.createElement(h.a.Item,{key:"0"},r.a.createElement(x.b,{to:"/"},"Home")),r.a.createElement(h.a.Item,{key:"1"},r.a.createElement(x.b,{to:"/users/login"},"Entrar")),r.a.createElement(h.a.Item,{key:"2"},r.a.createElement(x.b,{to:"/users/signup"}," Se Cadastre!")))))}}]),t}(n.Component),A=(a(518),a(147)),P=a(353),T=(A.a.Option,function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",email:""},a.state={confirmDirty:!1},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(f.a)({},n,r))},a.handleSubmit=function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,t){e||console.log("Received values of form: ",t)})),t.next=4,v.a.awrap(w({url:"".concat("https://mooviapp.herokuapp.com","/users/signup"),method:"POST",data:{username:a.state.username,email:a.state.email,password:a.state.password}}));case 4:200===t.sent.status&&(a.setState({username:"roob",email:"roob@gmail.com",password:"123"}),console.log(a.props.history),a.props.history.push("/login"));case 6:case"end":return t.stop()}}))},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.compareToFirstPassword=function(e,t,n){var r=a.props.form;t&&t!==r.getFieldValue("password")?n("Two passwords that you enter is inconsistent!"):n()},a.validateToNextPassword=function(e,t,n){var r=a.props.form;t&&a.state.confirmDirty&&r.validateFields(["confirm"],{force:!0}),n()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("article",{class:"mw7 center bg-white shadow-5 br3 pa3 pa4-ns mv6 ba b--black-10"},r.a.createElement(O.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},{onSubmit:this.handleSubmit}),r.a.createElement(O.a.Item,{label:r.a.createElement("span",null,"Username\xa0",r.a.createElement(P.a,{title:"What do you want others to call you?"},r.a.createElement(k.a,{type:"question-circle-o"})))},e("username",{rules:[{required:!0,message:"Please input your username!",whitespace:!0}]})(r.a.createElement(j.a,{name:"username",onChange:this.handleChange}))),r.a.createElement(O.a.Item,{label:"E-mail"},e("email",{rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(r.a.createElement(j.a,{name:"email",onChange:this.handleChange}))),r.a.createElement(O.a.Item,{label:"Password",hasFeedback:!0},e("password",{rules:[{required:!0,message:"Please input your password!"},{validator:this.validateToNextPassword}]})(r.a.createElement(j.a.Password,{name:"password",onChange:this.handleChange}))),r.a.createElement(O.a.Item,{label:"Confirm Password",hasFeedback:!0},e("confirm",{rules:[{required:!0,message:"Please confirm your password!"},{validator:this.compareToFirstPassword}]})(r.a.createElement(j.a.Password,{onBlur:this.handleConfirmBlur}))),r.a.createElement(O.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(S.a,{type:"primary",htmlType:"submit"},"Register"))))}}]),t}(n.Component)),_=O.a.create({name:"register"})(T),U=(a(519),a(354)),N=function(e){var t=e.component,a=e.isAuth,n=Object(U.a)(e,["component","isAuth"]);return console.log(a),r.a.createElement(p.b,{render:function(e){return a?r.a.createElement(t,Object.assign({},n,e)):r.a.createElement(p.a,{to:"/users/login"})}})},D=a(90),F=a(694),z=a(352),L=a(687),G=a(697),B=function(e){var t=e.movies,a=(e.isSubscribed,e.getMovies),s=e.updateSubscribed,o=Object(n.useState)(!1),c=Object(D.a)(o,2),i=c[0],l=c[1];Object(n.useEffect)((function(){v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.awrap(a());case 2:return e.next=4,v.a.awrap(s());case 4:l(!0);case 5:case"end":return e.stop()}}))}),[]);var u=t.map((function(e){var t=e.poster_urls[0];return i&&r.a.createElement(F.a,{key:e._id,raised:!0,link:!0,href:"/movies/".concat(e._id),image:r.a.createElement(z.a,{style:{width:"100%"},verticalAlign:"middle",centered:!0,size:"small",src:t})})}));return r.a.createElement(L.a,null,r.a.createElement(G.a,{style:{paddingTop:"30px"},as:"h2"},"Filmes em Cartaz"),r.a.createElement(F.a.Group,{centered:!0,itemsPerRow:6},u))},q=a(145),H=a(146),K=a(336),R=a.n(K);function W(){var e=Object(q.a)(["\n\n  && {\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 450px !important;\n  }\n"]);return W=function(){return e},e}function J(){var e=Object(q.a)(["\n\n  position: relative;\n  padding-top: 56.25%;\n"]);return J=function(){return e},e}var V=H.a.div(J()),Z=Object(H.a)(R.a)(W()),$=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(V,null,r.a.createElement(Z,{url:this.props.url,controls:!0,light:!0,width:"100%"}))}}]),t}(n.Component),Q=(a(590),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={movie:{},omdbDetail:{},movieTrailerUrl:null,isLoading:!0},a.getDetails=function(){var e,t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=a.props.computedMatch.params.id,n.prev=1,n.next=4,v.a.awrap(w.get("".concat("https://mooviapp.herokuapp.com","/movies/").concat(e)));case 4:return t=n.sent,console.log("banana",t.data),n.abrupt("return",t.data);case 9:n.prev=9,n.t0=n.catch(1),console.log(n.t0);case 12:case"end":return n.stop()}}),null,null,[[1,9]])},a.getTrailer=function(){var e,t,n,r,s;return v.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=a.state.movie,t=e.original_title,n=e.original_language,o.prev=1,o.next=4,v.a.awrap(w.get("".concat("https://mooviapp.herokuapp.com","/movies/trailer"),{params:{title:t,language:n}}));case 4:if(!(r=o.sent).data){o.next=8;break}return s=r.data.id.videoId,o.abrupt("return","https://youtube.com/watch?v=".concat(s));case 8:o.next=13;break;case 10:o.prev=10,o.t0=o.catch(1),console.log(o.t0);case 13:case"end":return o.stop()}}),null,null,[[1,10]])},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n,r;return v.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,v.a.awrap(this.getDetails());case 2:return e=s.sent,Object.keys(e).length>1?(t=e.movie,a=e.omdbDetail,this.setState({movie:t,omdbDetail:a})):(n=e.movie,this.setState({movie:n})),s.next=6,v.a.awrap(this.getTrailer());case 6:(r=s.sent)&&this.setState({movieTrailerUrl:r,isLoading:!1});case 8:case"end":return s.stop()}}),null,this)}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.movieTrailerUrl,n=e.movie,s=e.omdbDetail;return r.a.createElement("div",null,!t&&r.a.createElement("div",null,r.a.createElement($,{url:a}),r.a.createElement("div",{className:"movie_card"},r.a.createElement("div",{className:"info_section"},r.a.createElement("div",{className:"movie_header"},r.a.createElement("img",{className:"locandina",src:n.poster_urls[0],alt:"movie poster"}),r.a.createElement("h1",null,n.title),r.a.createElement("h4",null,n.release_date.slice(0,4)," ",s.Director,r.a.createElement("span",null,r.a.createElement("img",{src:"/images/imdb_icon.png",width:"30",alt:"imdb"})," ",": ",s.Ratings[0].Value),r.a.createElement("span",null,r.a.createElement("img",{src:"/images/fresh.png",width:"20",alt:"rotten"})),r.a.createElement("span",null,r.a.createElement("img",{src:"/images/metacritic.png",width:"20",alt:"imdb"}))),r.a.createElement("span",{className:"minutes"},s.Runtime),r.a.createElement("p",{className:"type"},s.Genre)),r.a.createElement("div",{className:"movie_desc"},r.a.createElement("p",{className:"text"},n.overview))),r.a.createElement("div",{class:"blur_back"}))))}}]),t}(n.Component)),Y=a(100),X=a(339),ee={base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}},te=function(){return r.a.createElement("div",{style:{border:"solid 1px yellow",borderRadius:"5px"}},r.a.createElement(Y.CardElement,{className:"MyCardElement",style:ee}))},ae=a(698),ne=a(690),re=a(45),se=a(696),oe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleAddressChange=function(e){var t=e.target,n=t.name,r=t.value,s=a.state.address;a.setState({address:Object(X.a)({},s,Object(f.a)({},n,r))})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(f.a)({},n,r))},a.redirect=function(){setTimeout((function(){a.props.history.push("/movies/now-playing")}),2e3)},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,r=t.address,s=t.phone,o=t.email,c=a.props.elements.getElement("card");console.log(a.props),a.props.stripe.createPaymentMethod({type:"card",card:c,billing_details:{name:n,address:r,phone:s,email:o}}).then((function(e){var t,r,s;return v.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.paymentMethod,a.setState({processing:!0,disabled:!0}),c.next=4,v.a.awrap(w({url:"".concat("https://mooviapp.herokuapp.com","/payments/customer"),method:"POST",data:{name:n,email:o,payment_method:t.id}}));case 4:if(200!==(r=c.sent).status){c.next=12;break}return s=a.props.planId,c.next=9,v.a.awrap(w({url:"".concat("https://mooviapp.herokuapp.com","/payments/subscription"),method:"POST",data:{planId:s}}));case 9:a.setState({processing:!1,disabled:!1,succeeded:!0}),c.next=13;break;case 12:console.log(r.data);case 13:case"end":return c.stop()}}))})).catch((function(e){return a.setState({error:e.message})}))},a.renderSuccess=function(){return r.a.createElement("div",null,r.a.createElement(ae.a,{animation:"pulse",duration:1e3,transitionOnMount:!0,onStart:a.redirect},r.a.createElement(z.a,{centered:!0,src:"/images/success.svg",size:"medium"})),r.a.createElement(G.a,{textAlign:"center",as:"h2"},"Subscription Created!"))},a.renderForm=function(){return r.a.createElement(ne.a,{onSubmit:a.handleSubmit},r.a.createElement(ne.a.Field,null,r.a.createElement("label",null,"Name"),r.a.createElement("input",{onChange:a.handleChange,type:"text",name:"name",value:a.state.name})),r.a.createElement(ne.a.Field,null,r.a.createElement("label",null,"email"),r.a.createElement("input",{onChange:a.handleChange,type:"email",name:"email",value:a.state.email})),r.a.createElement(ne.a.Field,null,r.a.createElement("label",null,"Address"),r.a.createElement("input",{onChange:a.handleAddressChange,type:"text",name:"line1",value:a.state.address.line1,placeholder:"Line 1"}),r.a.createElement("input",{onChange:a.handleAddressChange,type:"text",name:"line2",value:a.state.address.line2,placeholder:"Line 2"}),r.a.createElement("input",{onChange:a.handleAddressChange,type:"text",name:"city",value:a.state.address.city,placeholder:"City"}),r.a.createElement("input",{onChange:a.handleAddressChange,type:"number",name:"postal_code",value:a.state.address.postal_code,placeholder:"ZIP Code"})),r.a.createElement(ne.a.Field,null,r.a.createElement("label",null,"Phone Number"),r.a.createElement("input",{onChange:a.handleChange,type:"tel",name:"phone",value:a.state.phone})),r.a.createElement(re.a,null,r.a.createElement("label",null,"Credit Card"),r.a.createElement(te,null)),r.a.createElement(se.a,{disabled:a.state.disabled,loading:a.state.processing,color:"yellow"},"Confirm order"))},a.state={name:"",address:{city:"",line1:"",line2:"",postal_code:""},email:"",phone:"",succeeded:!1,processing:!1,disabled:!1,error:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(L.a,{style:{position:"relative",width:"35%",margin:"0 auto",paddingTop:"50px"}},this.state.succeeded&&this.renderSuccess(),!this.state.succeeded&&this.renderForm())}}]),t}(n.Component),ce=Object(Y.injectStripe)(oe),ie=(a(614),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).getKey=function(){var e,t;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.a.awrap(w({url:"".concat("https://mooviapp.herokuapp.com","/payments/public-key"),method:"GET"}));case 2:return e=a.sent,t=e.data.key,a.abrupt("return",t);case 5:case"end":return a.stop()}}))},a.state={apiKey:null},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(this.getKey());case 2:e=t.sent,console.log(e),this.setState({apiKey:e});case 5:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){if(this.props.isSubscribed)return r.a.createElement(p.a,{to:"/movies/now-playing"});var e=this.props.computedMatch.params.planId;return console.log(e),r.a.createElement("div",{className:"checkout"},this.state.apiKey&&r.a.createElement(Y.StripeProvider,{apiKey:this.state.apiKey},r.a.createElement(Y.Elements,null,r.a.createElement(ce,{history:this.props.history,planId:e}))))}}]),t}(n.Component)),le=a(688),ue=(a(615),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(x.b,{to:"/movies/now-playing"},r.a.createElement(le.a,{autoplay:!0},r.a.createElement("div",{className:"marvel"}),r.a.createElement("div",{className:"liga-da-jutica"}),r.a.createElement("div",{className:"toy-story"}),r.a.createElement("div",{className:"fast-and-furious"})))}}]),t}(n.Component)),me=function(e){var t=e.planId,a=e.title,n=e.description,s=e.price,o=e.planName;return r.a.createElement(F.a,{raised:!0,style:{marginRight:"50px"}},r.a.createElement(F.a.Content,{textAlign:"center"},r.a.createElement(F.a.Header,null,a),r.a.createElement(F.a.Description,null,n),r.a.createElement(z.a,{verticalAlign:"middle",size:"small",src:"/images/movie_ticket_black.svg"}),r.a.createElement(F.a.Content,{extra:!0},r.a.createElement(x.b,{to:"/subscribe/".concat(t)},r.a.createElement(se.a,{fluid:!0,color:"yellow",animated:"fade"},r.a.createElement(se.a.Content,{visible:!0},"Sign-up for a ",o," plan"),r.a.createElement(se.a.Content,{hidden:!0},"$",s," a month"))))))},pe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={plans:{fanatic:"plan_GG68SiiJKHacGo",adventure:"plan_GG61UfbTdoFMtl",basic:"plan_GG63EMsmJkPfA6"}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ue,null),r.a.createElement("article",{class:"pa3 pa5-ns",style:{paddingBottom:"20px"}},r.a.createElement("h1",{class:"f3 f2-m f2-l"},"Moovi"),r.a.createElement("p",{class:"lh-copy"},"Moovi \xe9 uma aplica\xe7\xe3o feita para quem gosta de ir ao cinema e gostaria de uma alternativa aos pre\xe7os altos dos ingressos. N\xf3s apresentamos uma plataforma completa e organizada dos filmes dispon\xedveis em cartaz nos cinemas parceiros mais pr\xf3ximos a voc\xea. Assine um dos nossos planos e desfrute de uma experi\xeancia f\xe1cil e simples e aproveite todos os filmes sem preocupa\xe7\xe3o.")),r.a.createElement(L.a,{style:{marginTop:"50px"}},r.a.createElement(F.a.Group,{centered:!0,style:{marginBottom:"50px"}},r.a.createElement(me,{planId:this.state.plans.basic,title:"Basic Plan",description:"Watch 5 movies per month",price:"19.99"}),r.a.createElement(me,{planId:this.state.plans.adventure,title:"Adventure Plan",description:"Watch 10 movies per month",price:"29.99"}),r.a.createElement(me,{planId:this.state.plans.fanatic,title:"Fanatic Plan",description:"Watch unlimited movies per month",price:"49.99"}))))}}]),t}(n.Component),de=a(691),he=a(689);function ge(){var e=Object(q.a)(["\n  width: 80%;\n  margin: 10% auto;\n"]);return ge=function(){return e},e}var ve=H.a.div(ge()),fe=a(119),be=a(104),Ee=Object(fe.compose)(Object(fe.withProps)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyCQpuEpO4UtIbYaCSI_-v9_bBuxOgTMbKw&libraries=geometry,drawing,places",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"400px"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}})}),Object(fe.withStateHandlers)((function(){return{isOpen:!1,markerIndex:0}}),{onToggleOpen:function(e){var t=e.isOpen;return function(e){return{isOpen:!t,markerIndex:e}}}}),be.withScriptjs,be.withGoogleMap)((function(e){var t=e.position,a=t.latitude,n=t.longitude,s=e.list.map((function(t,a){var n=a+1;return r.a.createElement(be.Marker,{key:a,label:n.toString(),position:{lat:t.location.lat,lng:t.location.lng},onClick:function(){e.showTime(t._id)},onMouseOver:function(){e.onToggleOpen(n)}},e.isOpen&&e.markerIndex===n&&r.a.createElement(be.InfoWindow,{onCloseClick:e.onToggleOpen},r.a.createElement("div",null,r.a.createElement("h1",{style:{fontSize:"1rem"}},t.name),r.a.createElement("p",{style:{fontSize:"0.8rem"}},t.address))))}));return r.a.createElement(be.GoogleMap,{defaultZoom:15,defaultCenter:{lat:a,lng:n}},e.isMarkerShown&&r.a.createElement(be.Marker,{position:{lat:a,lng:n},onClick:e.onMarkerClick}),s)})),ye=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isMarkerShown:!0},a.componentDidMount=function(){return v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:a.delayedShowMarker();case 1:case"end":return e.stop()}}))},a.delayedShowMarker=function(){setTimeout((function(){a.setState({isMarkerShown:!0})}),1e3)},a.handleMarkerClick=function(){a.setState({isMarkerShown:!1}),a.delayedShowMarker()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee,{isMarkerShown:this.state.isMarkerShown,onMarkerClick:function(){e.handleMarkerClick()},position:this.props.currentPos,list:this.props.list,showTime:this.props.showTime}))}}]),t}(n.Component),we=function(e){var t=e.movies,a=e.getMovies,s=Object(n.useState)([]),o=Object(D.a)(s,2),c=o[0],i=o[1],l=Object(n.useState)({latitude:null,longitude:null}),u=Object(D.a)(l,2),m=u[0],p=u[1],d=Object(n.useState)(null),h=Object(D.a)(d,2),g=h[0],f=h[1],b=Object(n.useState)(!1),E=Object(D.a)(b,2),y=E[0],O=E[1],j=Object(n.useState)([]),S=Object(D.a)(j,2),C=S[0],I=S[1];Object(n.useEffect)((function(){v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.awrap(A());case 2:return e.next=4,v.a.awrap(a());case 4:case"end":return e.stop()}}))}),[]);var M=function(){var e,t,a;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=m.latitude,t=m.longitude,n.next=4,v.a.awrap(w({method:"get",url:"".concat("https://mooviapp.herokuapp.com","/movie-theater/all-places/lat/").concat(e,"/lng/").concat(t)}));case 4:return a=n.sent,console.log(a.data.allPlacesDB),n.abrupt("return",a);case 7:case"end":return n.stop()}}))},A=function(){return v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.geolocation&&navigator.geolocation.getCurrentPosition(T);case 1:case"end":return e.stop()}}))};Object(n.useEffect)((function(){v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.awrap(P());case 2:case"end":return e.stop()}}))}),[m]);var P=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(M());case 2:e=t.sent,i(e.data.allPlacesDB),O(!0),f(e.data.userCity);case 6:case"end":return t.stop()}}))},T=function(e){p({latitude:e.coords.latitude,longitude:e.coords.longitude})},_=function(e){for(var a="",n=0;n<e.times.length;n+=1)a+="".concat(e.times[n],"  |  ");var s=function(e){var a=t.find((function(t){return t.title===e}));return a?[a._id,a.poster_urls[0]]:[null,"./images/Logo-moovi.png"]}(e.movie_name);console.log("movieInfo",s);var o;return r.a.createElement(de.a.Item,null,r.a.createElement(de.a.Item.Meta,{avatar:r.a.createElement(he.a,{shape:"square",size:80,src:"".concat(s[1])}),title:(o=s[0],o?r.a.createElement(x.b,{to:"/movies/".concat(s[0])},e.movie_name):r.a.createElement(x.b,{to:"/movies/now-playing"},e.movie_name)),description:a}),r.a.createElement("p",null,e.date))};return y?r.a.createElement(ve,null,r.a.createElement(ye,{currentPos:m,list:c,showTime:function(e){var a;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return I([]),n.next=3,v.a.awrap(w({method:"get",url:"".concat("https://mooviapp.herokuapp.com","/sessions/").concat(e,"/").concat(g)}));case 3:a=n.sent,I(a.data),console.log("this state allSessions",C),console.log("this props movies",t);case 7:case"end":return n.stop()}}))}}),r.a.createElement(de.a,{itemLayout:"horizontal",dataSource:C,renderItem:function(e){return _(e)}})):r.a.createElement(k.a,{type:"loading",style:{height:"50px",marginTop:"30px",textAlign:"center"}})},Oe=function(e){function t(){var e;Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).authenticateUser=function(){e.setState({isUserAuthenticated:!0})},e.logoutUser=function(){localStorage.removeItem("loggedUser"),e.setState({isUserAuthenticated:!1})},e.updateSubscribed=function(){w.get("".concat("https://mooviapp.herokuapp.com","/payments/status")).then((function(t){e.setState({isUserSubscribed:t.data.status})})).catch((function(e){return console.log(e)}))},e.getMovies=function(){w.get("".concat("https://mooviapp.herokuapp.com","/movies/now-playing")).then((function(t){console.log(t),e.setState({movies:t.data.slice(),allLoaded:!0})})).catch((function(e){return console.log(e)}))},e.state={isUserAuthenticated:!1,isUserSubscribed:!1,movies:[],allLoaded:!1};var a=localStorage.getItem("loggedUser");return console.log(a),a&&(e.state.isUserAuthenticated=!0),e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=d.a.Footer,a=this.state,n=a.isUserAuthenticated,s=a.isUserSubscribed,o=a.movies;return r.a.createElement("div",null,r.a.createElement(M,null),r.a.createElement("hr",null),r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",component:pe}),r.a.createElement(p.b,{exact:!0,path:"/users/login",render:function(t){return r.a.createElement(I,Object.assign({},t,{authenticateUser:e.authenticateUser}))}}),r.a.createElement(p.b,{exact:!0,path:"/users/signup",component:_}),r.a.createElement(N,{exact:!0,path:"/movies/now-playing",component:B,isAuth:n,isSubscribed:s,movies:o,getMovies:this.getMovies,updateSubscribed:this.updateSubscribed}),r.a.createElement(N,{exact:!0,path:"/subscribe/:planId",component:ie,isAuth:n,isSubscribed:s}),r.a.createElement(N,{exact:!0,path:"/movies/:id",component:Q,isAuth:n,isSubscribed:s}),r.a.createElement(N,{exact:!0,path:"/all-movie-theaters",component:we,isAuth:n,isSubscribed:s,movies:o,getMovies:this.getMovies})),r.a.createElement(t,{style:{textAlign:"center"}},"Created by Moovi \xa92019"),"}")}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(d.a,null,r.a.createElement("div",{style:{background:"#fff",padding:0,minHeight:380}},r.a.createElement(x.a,null,r.a.createElement(Oe,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[371,1,2]]]);
//# sourceMappingURL=main.35cb6e7a.chunk.js.map